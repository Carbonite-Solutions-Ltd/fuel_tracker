import{c as m,r as B,a as f,b as v,d as t,w as s,e as a,u as l,_ as V,C as N,D as A,F as h,f as c,o as g,g as E,h as q,t as k,A as F,I as S,i as y}from"./index.8f4fd794.js";import{F as z}from"./FileUploader.12e87172.js";const G={class:"flex flex-row items-center justify-between mt-2 mr-2 ml-0"},H=y("Fuel Tracker"),J={class:"flex flex-row items-center justify-between mt-2 mr-2 ml-2"},K=a("h1",{class:"text-5xl font-black text-gray-900"},null,-1),M=y("Issue Fuel"),P={class:"space-y-4"},Q={class:"p-2"},W={class:"p-2"},X={class:"p-2"},Y={class:"p-2"},Z={class:"p-2"},ee={class:"p-2"},re={setup(te){const _=m({doctype:"Fuel Used",fields:["resource","fuel_issued_lts"],limit:100,filters:{docstatus:1}});_.reload();const p=B(!1),x=()=>{_.insert.submit(action)},i=m({doctype:"Site",fields:["name","name"],transform(n){return n.map(e=>({label:e.name,value:e.name}))}});i.reload();const T=f(()=>i.list.loading||!i.data?[]:i.data),u=m({doctype:"Fuel Tanker",fields:["tanker","tanker"],transform(n){return n.map(e=>({label:e.tanker,value:e.tanker}))}});u.reload();const C=f(()=>u.list.loading||!u.data?[]:u.data),r=m({doctype:"Resource",fields:["name","name"],transform(n){return n.map(e=>({label:e.name,value:e.name}))}});r.reload();const I=f(()=>r.list.loading||!r.data?[]:r.data),U=n=>{},w=n=>{};return(n,e)=>{const L=c("ion-title"),O=c("ion-toolbar"),R=c("ion-header"),$=c("ion-page"),d=c("Variant");return g(),v(h,null,[t($,null,{default:s(()=>[t(R,null,{default:s(()=>[t(O,null,{default:s(()=>[a("div",G,[t(L,null,{default:s(()=>[H]),_:1}),a("div",null,[t(l(E),{onClick:e[0]||(e[0]=o=>p.value=!0),src:"././public/favicon.png",style:{width:"24px",height:"24px"}})])])]),_:1})]),_:1})]),_:1}),a("div",J,[K,t(l(V),{onClick:e[1]||(e[1]=o=>p.value=!0),"icon-left":"plus"},{default:s(()=>[M]),_:1})]),t(l(N),{title:"Fuel Used List",class:"mt-10 mr-2 ml-2"},{default:s(()=>[a("div",null,[a("ul",null,[(g(!0),v(h,null,q(l(_).data,o=>(g(),v("li",{key:o.resource},[a("span",null,k(o.resource)+" - "+k(o.fuel_issued_lts),1)]))),128))])])]),_:1}),t(l(A),{options:{title:"Issue Fuel",actions:[{label:"Issue Fuel",appearance:"primary",handler:({close:o})=>{x(),o()}},{label:"Cancel"}]},modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=o=>p.value=o)},{"body-content":s(()=>[a("div",P,[t(d,{title:"Single option"},{default:s(()=>[a("div",Q,[t(l(F),{options:l(T),modelValue:l(i).name,"onUpdate:modelValue":e[2]||(e[2]=o=>l(i).name=o),placeholder:"Select Site"},null,8,["options","modelValue"])])]),_:1}),t(d,{title:"Single option"},{default:s(()=>[a("div",W,[t(l(F),{options:l(C),modelValue:l(u).tanker,"onUpdate:modelValue":e[3]||(e[3]=o=>l(u).tanker=o),placeholder:"Select Fuel Tanker"},null,8,["options","modelValue"])])]),_:1}),t(d,{title:"Single option"},{default:s(()=>[a("div",X,[t(l(F),{options:l(I),modelValue:l(r).name,"onUpdate:modelValue":e[4]||(e[4]=o=>l(r).name=o),placeholder:"Select Resource"},null,8,["options","modelValue"])])]),_:1}),t(d,null,{default:s(()=>[a("div",Y,[t(l(S),{type:"number",placeholder:"Type In Odometer Reading"})])]),_:1}),t(d,null,{default:s(()=>[a("div",Z,[t(l(S),{type:"number",placeholder:"Type In Fuel Issued (LTS)"})])]),_:1}),t(d,null,{default:s(()=>[a("div",ee,[t(l(z),{fileTypes:["image/*"],validateFile:U,onSuccess:w},{default:s(({file:o,uploading:b,progress:D,uploaded:le,message:oe,error:se,total:ae,success:ne,openFileSelector:j})=>[t(l(V),{onClick:j,loading:b},{default:s(()=>[y(k(b?`Uploading ${D}%`:"Upload Img of Odometer"),1)]),_:2},1032,["onClick","loading"])]),_:1})])]),_:1})])]),_:1},8,["options","modelValue"])],64)}}};export{re as default};
